<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Controle</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="PostgreSQL.html"><strong aria-hidden="true">1.</strong> Postgres</a></li><li class="chapter-item expanded "><a href="Controle.html"><strong aria-hidden="true">2.</strong> Controle</a></li><li class="chapter-item expanded "><a href="Cadastro.html"><strong aria-hidden="true">3.</strong> Cadastro</a></li><li class="chapter-item expanded "><a href="Producao.html"><strong aria-hidden="true">4.</strong> Produção</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Controle</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="postgresql"><a class="header" href="#postgresql">PostgreSQL</a></h1>
<p>É o banco de dados utilizado neste sistema para armazenar as
informações.<br />
Anotações de comandos e explicações do banco.</p>
<h4 id="criando-um-novo-tipo-de-dados"><a class="header" href="#criando-um-novo-tipo-de-dados">Criando um novo tipo de dados</a></h4>
<p>Criando o tipo para sexo.</p>
<pre><code>CREATE TYPE sexo AS ENUM ('M', 'F');
</code></pre>
<p>Modificando uma tabela:</p>
<pre><code>ALTER TABLE cliente ALTER COLUMN s TYPE sexo USING s::sexo;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="controle"><a class="header" href="#controle">Controle</a></h1>
<p>Este aplicativo gerencia os setores de uma empresa.
A empresa utilizada como estudo é a A.M.E.</p>
<p>As bibliotecas utilizadas são: Framework CopperSpice, nlohmann json, spdlog
e PostgreSQL.</p>
<p>O aplicativo principal está contido no sub-projeto CMAKE chamado Desktop.
Neste está toda a inicialização das bibliotecas e também contém todos
os dispositivos principais utilizados na interface gráfica.</p>
<p>Cada setor será dividivo em módulos. Um módulo é um conjunto de arquivos
carregados pelo aplicativo para adicionar novas funcionalidades.<br />
As funcionalidades estão englobadas em serviços.
Os serviços também podem ser obtidos através do aplicativo principal
utilizando a instância do aplicativo QApplication::instance() em qualquer
parte do sistema, pois é compartilhada em todo o processo através da
própria framework CopperSpice.
Estes serviços se tornam disponíveis através de cabeçalhos que declaram
classes virtuais com as funcionalidades implementadas pelo serviço.
Sendo obtidas por funções da instância do aplicativo.</p>
<p>Um módulo é carregado pelo aplicativo Desktop através da biblioteca Módulos.</p>
<h2 id="módulos"><a class="header" href="#módulos">Módulos</a></h2>
<p>Lista de módulos principais do sistema:</p>
<ul>
<li><a href="Cadastro.html">Cadastro</a> é o módulo que integra ao sistema as 
funcionalidades de cadastro.</li>
<li><a href="Producao.html">Produção</a> é o módulo que integra todos os serviços
para gerenciar a produção da empresa. Desde o orçamento, até 
a montagem da máquina.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cadastro"><a class="header" href="#cadastro">Cadastro</a></h1>
<p>Este módulo gerencia o cadastro das entidades no sistema.
Uma pessoa é a principal entidade utilizada para identificar
funcionários, empresas, pessoas físicas.</p>
<p>Este módulo começa implementando o cadastro das pessoas que interage 
com o sistema como: pessoas físicas, pessoas jurídicas.
A maioria das tabelas não tem em sua chave primaria o auto-incremento
e por isso ao inserir alguma informação na tabela, utiliza
a tabela auxilitar <em>cadastro.index</em>.</p>
<table><thead><tr><th style="text-align: center">id</th><th style="text-align: center">id_pessoas</th><th style="text-align: center">id_pessoas_fisicas</th><th style="text-align: center">id_pessoas_juridicas</th><th style="text-align: center">id_clientes</th><th style="text-align: center">id_fabricantes</th><th style="text-align: center">id_fornecedores</th><th style="text-align: center">id_enderecos</th><th style="text-align: center">id_contatos</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">2</td><td style="text-align: center">1</td><td style="text-align: center">1</td><td style="text-align: center"></td><td style="text-align: center">1</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
</tbody></table>
<p>Comandos:</p>
<pre><code>-- object: cadastro.index | type: TABLE --
-- DROP TABLE IF EXISTS cadastro.index CASCADE;
CREATE TABLE cadastro.index (
id integer NOT NULL,
id_pessoas bigint DEFAULT 1,
id_pessoas_fisicas bigint DEFAULT 1,
id_pessoas_juridicas bigint DEFAULT 1,
id_clientes bigint DEFAULT 1,
id_fabricantes bigint DEFAULT 1,
id_fornecedores bigint DEFAULT 1,
id_enderecos bigint DEFAULT 1,
id_contatos bigint DEFAULT 1,
CONSTRAINT index_pkey PRIMARY KEY (id)
);
-- ddl-end --
ALTER TABLE cadastro.index OWNER TO administradores;
-- ddl-end --
</code></pre>
<p>Tanto um como o outro são identificados por um único ID.
Tabela: <em>cadastro.pessoas</em></p>
<table><thead><tr><th style="text-align: center">id</th><th style="text-align: center">nome</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">A.M.E.</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">Robson</td></tr>
</tbody></table>
<p>Comandos:</p>
<pre><code>SET check_function_bodies = false;
-- ddl-end --

-- object: cadastro | type: SCHEMA --
-- DROP SCHEMA IF EXISTS cadastro CASCADE;
CREATE SCHEMA cadastro;
-- ddl-end --
ALTER SCHEMA cadastro OWNER TO administradores;
-- ddl-end --

-- object: cadastro.pessoas | type: TABLE --
-- DROP TABLE IF EXISTS cadastro.pessoas CASCADE;
CREATE TABLE cadastro.pessoas (
id bigint NOT NULL,
nome text NOT NULL,
CONSTRAINT pessoas_pkey PRIMARY KEY (id)
);
-- ddl-end --
ALTER TABLE cadastro.pessoas OWNER TO administradores;
-- ddl-end --
</code></pre>
<p>A classificação destas pessoas é feita por outra tabela.<br />
Tabela: <em>cadastro.pessoas_fisicas</em></p>
<table><thead><tr><th style="text-align: center">id</th><th style="text-align: center">id_pessoa</th><th style="text-align: center">sobrenome</th><th style="text-align: center">cpf</th><th style="text-align: center">rg</th><th style="text-align: center">data_emissao</th><th style="text-align: center">id_cidade_nascimento</th><th style="text-align: center">id_estado_nascimento</th><th style="text-align: center">id_pais_nascimento</th><th style="text-align: center">data_nascimento</th><th style="text-align: center">pai</th><th style="text-align: center">mae</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">2</td><td style="text-align: center">Teodoro Calixto</td><td style="text-align: center">33726070826</td><td style="text-align: center">343532074</td><td style="text-align: center">04/08/1986</td><td style="text-align: center">0</td><td style="text-align: center">0</td><td style="text-align: center">0</td><td style="text-align: center">04/08/1986</td><td style="text-align: center">Edmo Teodoro da Silva</td><td style="text-align: center">Terezinha Calixto da Cruz Silva</td></tr>
</tbody></table>
<p>Comandos:</p>
<pre><code>-- object: cadastro.pessoas_fisicas | type: TABLE --
-- DROP TABLE IF EXISTS cadastro.pessoas_fisicas CASCADE;
CREATE TABLE cadastro.pessoas_fisicas (
	id bigint NOT NULL,
	id_pessoa bigint NOT NULL,
	sobrenome text,
	cpf text NOT NULL,
	rg text NOT NULL,
	data_emissao date,
	id_cidade_nascimento integer,
	id_estado_nascimento integer,
	id_pais_nascimento integer,
	data_nascimento date,
	pai text,
	mae text,
	CONSTRAINT pessoas_fisicas_cpf_key UNIQUE (cpf),
	CONSTRAINT pessoas_fisicas_id_pessoa_key UNIQUE (id_pessoa),
	CONSTRAINT pessoas_fisicas_pkey PRIMARY KEY (id)
);
-- ddl-end --
ALTER TABLE cadastro.pessoas_fisicas OWNER TO administradores;
-- ddl-end --
</code></pre>
<p>Tabela: <em>cadastro.pessoas_juridicas</em></p>
<table><thead><tr><th style="text-align: center">id</th><th style="text-align: center">id_pessoa</th><th style="text-align: center">razao_social</th><th style="text-align: center">cnpj</th><th style="text-align: center">ie</th><th style="text-align: center">data_fundacao</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">1</td><td style="text-align: center">A.M.E. Automação de Maquinas e Equipamentos LTDA.</td><td style="text-align: center">60579216000185</td><td style="text-align: center">297005500110</td><td style="text-align: center">01/01/1989</td></tr>
</tbody></table>
<p>Comandos:</p>
<pre><code>-- object: cadastro.pessoas_juridicas | type: TABLE --
-- DROP TABLE IF EXISTS cadastro.pessoas_juridicas CASCADE;
CREATE TABLE cadastro.pessoas_juridicas (
	id bigint NOT NULL,
	id_pessoa bigint NOT NULL,
	razao_social text,
	cnpj text NOT NULL,
	ie text,
	data_fundacao date,
	CONSTRAINT pessoas_juridicas_cnpj_key UNIQUE (cnpj),
	CONSTRAINT pessoas_juridicas_id_pessoa_key UNIQUE (id_pessoa),
	CONSTRAINT pessoas_juridicas_pkey PRIMARY KEY (id)
);
-- ddl-end --
ALTER TABLE cadastro.pessoas_juridicas OWNER TO administradores;
-- ddl-end --
</code></pre>
<p>A pessoa jurídica também é classificada por: fabricante, cliente, 
fornecedor.<br />
Tabela: <em>cadastro.fabricantes</em></p>
<table><thead><tr><th style="text-align: center">id</th><th style="text-align: center">id_pessoa</th><th style="text-align: center">id_pessoa_juridica</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">1</td><td style="text-align: center">1</td></tr>
</tbody></table>
<p>Comandos:</p>
<pre><code>-- object: cadastro.fabricantes | type: TABLE --
-- DROP TABLE IF EXISTS cadastro.fabricantes CASCADE;
CREATE TABLE cadastro.fabricantes (
	id bigint NOT NULL,
	id_pessoa bigint,
	id_pessoa_juridica bigint,
	CONSTRAINT fabricantes_id_pessoa_key UNIQUE (id_pessoa),
	CONSTRAINT fabricantes_pkey PRIMARY KEY (id)
);
-- ddl-end --
ALTER TABLE cadastro.fabricantes OWNER TO administradores;
-- ddl-end --
</code></pre>
<p>Tabela: <em>cadastro.cliente</em></p>
<table><thead><tr><th style="text-align: center">id</th><th style="text-align: center">id_pessoa</th><th style="text-align: center">id_pessoa_juridica</th></tr></thead><tbody>
<tr><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
</tbody></table>
<p>Comandos:</p>
<pre><code>-- object: cadastro.clientes | type: TABLE --
-- DROP TABLE IF EXISTS cadastro.clientes CASCADE;
CREATE TABLE cadastro.clientes (
	id bigint NOT NULL,
	id_pessoa bigint,
	id_pessoa_juridica bigint,
	CONSTRAINT clientes_id_pessoa_key UNIQUE (id_pessoa),
	CONSTRAINT clientes_pkey PRIMARY KEY (id)
);
-- ddl-end --
ALTER TABLE cadastro.clientes OWNER TO administradores;
-- ddl-end --
</code></pre>
<p>Tabela: <em>cadastro.tipos_fornecedores</em></p>
<table><thead><tr><th style="text-align: center">id</th><th style="text-align: center">descricao</th></tr></thead><tbody>
<tr><td style="text-align: center"></td><td style="text-align: center"></td></tr>
</tbody></table>
<p>Comandos:</p>
<pre><code>-- object: cadastro.tipos_fornecedores | type: TABLE --
-- DROP TABLE IF EXISTS cadastro.tipos_fornecedores CASCADE;
CREATE TABLE cadastro.tipos_fornecedores (
	id integer NOT NULL,
	descricao text NOT NULL,
	CONSTRAINT tipos_fornecedores_descricao_key UNIQUE (descricao),
	CONSTRAINT tipos_fornecedores_pkey PRIMARY KEY (id)
);
-- ddl-end --
ALTER TABLE cadastro.tipos_fornecedores OWNER TO administradores;
-- ddl-end --
</code></pre>
<p>Tabela: <em>cadastro.fornecedores</em></p>
<table><thead><tr><th style="text-align: center">id</th><th style="text-align: center">id_pessoa</th><th style="text-align: center">id_pessoa_juridica</th><th style="text-align: center">id_tipo_fornecedor</th></tr></thead><tbody>
<tr><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
</tbody></table>
<p>Comandos:</p>
<pre><code>-- object: cadastro.fornecedores | type: TABLE --
-- DROP TABLE IF EXISTS cadastro.fornecedores CASCADE;
CREATE TABLE cadastro.fornecedores (
	id bigint NOT NULL,
	id_pessoa bigint,
	id_pessoa_juridica bigint,
	id_tipo_fornecedor integer DEFAULT 1,
	CONSTRAINT fornecedores_id_pessoa_key UNIQUE (id_pessoa),
	CONSTRAINT fornecedores_pkey PRIMARY KEY (id)
);
-- ddl-end --
ALTER TABLE cadastro.fornecedores OWNER TO administradores;
-- ddl-end --
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="produção"><a class="header" href="#produção">Produção</a></h1>
<p>Produção é o módulo que gerencia orçamentos, projetos, serviços
solicitação, compras.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:3000/__livereload");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
